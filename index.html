<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no" />
  <title>Wardrobe Tool — Rebuild (Shell)</title>

  <link rel="manifest" href='data:application/manifest+json,{
    "name":"Wardrobe & Equipment — Rebuild",
    "short_name":"Wardrobe2",
    "start_url":".",
    "display":"standalone",
    "background_color":"#0b0f14",
    "theme_color":"#0b0f14",
    "icons":[
      {"src":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAAaklEQVR4nO3BMQEAAADCoPVPbQ0PoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeDc1wAAGaT44gAAAAAElFTSuQmCC","sizes":"192x192","type":"image/png"}
    ]
  }' />

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Wardrobe2" />
  <meta name="theme-color" content="#0b0f14" />

  <style>
    :root { --bg:#0b0f14; --fg:#e6eef6; }
    html,body { height:100%; margin:0; }
    body {
      background:var(--bg); color:var(--fg);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      touch-action: none;
    }
    #app { position:fixed; inset:0; padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left); }
  </style>

  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.157.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.157.0/examples/jsm/"
    }
  }
  </script>
</head>
<body>
  <div id="app" role="application" aria-label="Wardrobe Tool v2"></div>

  <script src="./debugger.js"></script>
  <script type="module" src="./loading.js"></script>

  <script type="module">
    // mark entry task (visible in the loader)
    if (window.Debug && Debug.task) Debug.task.start('entry', 'Bootstrapping entry');

    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
    import { GLTFLoader }   from 'three/addons/loaders/GLTFLoader.js';

    // Expose the phonebook for subsequent modules
    window.Phonebook = { THREE, OrbitControls, GLTFLoader, version: '0.157.0' };

    // Signal to the loader that the phonebook is ready
    window.dispatchEvent(new CustomEvent('app:ready', { detail: { modules: Object.keys(window.Phonebook) }}));
    console.log('[Wardrobe2] entry loaded:', window.Phonebook);
    if (window.Debug) Debug.log('Phonebook ready: three@0.157.0, OrbitControls, GLTFLoader');

    // complete entry task
    if (window.Debug && Debug.task) Debug.task.done('entry', 'Entry OK');
  </script>

  <script type="module" src="./src/main.js"></script>
  <script type="module" src="./src/js/viewer.js"></script>
</body>
</html>
